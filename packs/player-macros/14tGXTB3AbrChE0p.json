{
  "name": "Roll Skill",
  "type": "script",
  "author": "6cxUP4dSannVjU9o",
  "img": "icons/svg/d20-highlight.svg",
  "scope": "global",
  "command": "// MAPEO de habilidades según tus imágenes\nconst habilidades = {\n  \"agi\": \"Agilidad\",\n  \"ath\": \"Atletismo\",\n  \"hwp\": \"Armas Pesadas\",\n  \"lwp\": \"Armas Ligeras\",\n  \"stl\": \"Sigilo\",\n  \"thv\": \"Ratería\",\n  \"cra\": \"Artesanía\",\n  \"ded\": \"Deducción\",\n  \"dis\": \"Disciplina\",\n  \"inm\": \"Intimidación\",\n  \"lor\": \"Saber\",\n  \"med\": \"Medicina\",\n  \"dec\": \"Engaño\",\n  \"ins\": \"Perspicacia\",\n  \"lea\": \"Liderazgo\",\n  \"prc\": \"Percepción\",\n  \"prs\": \"Persuasión\",\n  \"sur\": \"Supervivencia\"\n};\n\n// Buscar el primer token controlado o actor del jugador\nlet actor = null;\nif (canvas.tokens.controlled.length > 0)\n  actor = canvas.tokens.controlled[0].actor;\nelse\n  actor = game.user.character;\n\nif (!actor) {\n  ui.notifications.error(\"No tienes un personaje activo ni ningún token seleccionado.\");\n  return;\n}\n\n// Preparar el desplegable de habilidades\nlet habilidadesOptions = Object.entries(habilidades)\n  .map(([key, nombre]) => `<option value=\"${key}\">${nombre}</option>`)\n  .join(\"\");\n\n// Diálogo para lanzar la tirada\nnew Dialog({\n  title: `Tirada de habilidad (${actor.name})`,\n  content: `<p><b>Selecciona la habilidad a tirar:</b></p>\n            <select id=\"habilidad\">${habilidadesOptions}</select>`,\n  buttons: {\n    lanzar: {\n      icon: '<i class=\"fas fa-dice\"></i>',\n      label: \"Lanzar tirada\",\n      callback: async html => {\n        const skill = html.find(\"#habilidad\").val();\n        if (!skill) return;\n\n        // Lanza la tirada con el nombre correcto\n        actor.rollSkill(skill, { chatMessage: true });\n      }\n    }\n  }\n}).render(true);",
  "folder": null,
  "sort": 0,
  "ownership": {
    "default": 0
  },
  "flags": {
    "exportSource": {
      "world": "vinculosyjur-69b5b203",
      "system": "cosmere-rpg",
      "coreVersion": "12.343",
      "systemVersion": "1.0.1"
    }
  },
  "_id": "14tGXTB3AbrChE0p"
}